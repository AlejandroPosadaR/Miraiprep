spring.application.name=aimock

# Spring AI OpenAI Configuration
spring.ai.openai.api-key=${SPRING_AI_OPENAI_API_KEY}
spring.ai.openai.chat.options.model=gpt-4o-mini
spring.ai.openai.chat.options.temperature=0.8
# OpenAI HTTP Client Configuration (optimized for low latency)
spring.ai.openai.client.connection-timeout=10s
spring.ai.openai.client.read-timeout=60s
# Connection pool: reuse connections for faster subsequent requests
# Increased from 5 to 15 to reduce connection overhead for concurrent requests
spring.ai.openai.client.connection-pool.max-idle=15
spring.ai.openai.client.connection-pool.max-idle-time=60s

# PostgreSQL Configuration
# For local Docker: uses postgres service from docker-compose.yml
# For RDS: use application-rds.properties profile
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://postgres:5432/aimock}
spring.datasource.username=${DATABASE_USERNAME:postgres}
spring.datasource.password=${DATABASE_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver

# SSL Configuration
spring.datasource.hikari.data-source-properties.sslmode=${DATABASE_SSLMODE:prefer}
spring.datasource.hikari.data-source-properties.sslfactory=org.postgresql.ssl.DefaultJavaSSLFactory

# HikariCP Connection Pool (wait for DB to be ready)
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.initialization-fail-timeout=60000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2

# JPA/Hibernate
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false

# Flyway
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=false

# JWT Configuration
jwt.secret=5367566859703373367639792F423F452848284D6251655468576D5A71347437
jwt.expiration=86400000

# Server
server.port=8080

# Multipart file upload configuration (for audio transcription)
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=25MB
spring.servlet.multipart.max-request-size=25MB

# CORS (allow frontend from host machine)
app.cors.allowed-origins=http://localhost:5173,http://localhost:3000

# Logging - Suppress Spring Security warning about AuthenticationProvider
logging.level.org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer=ERROR

# SQS (off by default)
app.sqs.enabled=true
app.sqs.queue-url=${SQS_QUEUE_URL}
# app.sqs.region=ap-southeast-2
# app.sqs.endpoint=http://localstack:4566

# TTS Provider Configuration
# Options: "openai" or "elevenlabs"
tts.provider=${TTS_PROVIDER:openai}
# ElevenLabs API Key (required if tts.provider=elevenlabs)
elevenlabs.api-key=${ELEVENLABS_API_KEY:}
